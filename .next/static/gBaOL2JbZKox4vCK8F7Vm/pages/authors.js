(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{251:function(a,e,t){__NEXT_REGISTER_PAGE("/authors",function(){return a.exports=t(296),{page:a.exports.default}})},296:function(a,e,t){"use strict";t.r(e);var c=t(0),s=t.n(c),n=t(31),l=t(6),r=t.n(l),m=t(3),_=t(4),h=t(1),o=t(21),d=t(46),u=t(47),i=t(2),E=Object(m.compose)(m.withApollo,Object(m.graphql)(_.d,{name:"getAuthorsQuery"}),Object(m.graphql)(_.f,{name:"getGenresQuery"}),Object(m.graphql)(_.a,{name:"addAuthorQuery",options:{refetchQueries:[{query:_.d}]}}),Object(m.graphql)(_.j,{name:"updateAuthorQuery",options:{refetchQueries:[{query:_.d}]}}))(Object(d.a)(Object(m.withApollo)(function(a){var e=a.selectHandler,t=(a.clickHandler,a.changeHandler),c=a.submitHandler,n=a.mapFromCache,l=a.mapOptions,h=a.wrapProps,o=a.client,d=a.formType,E=Array.from(h.genreIds),j=Array.from(h.influenceIds);return s.a.createElement("div",{className:"jsx-".concat(i.a.__hash)},s.a.createElement("section",{className:"jsx-".concat(i.a.__hash)+" form-add"},s.a.createElement("label",{className:"jsx-".concat(i.a.__hash)+" form-add__label"},s.a.createElement("span",{className:"jsx-".concat(i.a.__hash)+" form-add__name"},"Name"),s.a.createElement("input",{name:"name",type:"text",placeholder:"enter name",value:h.name,onChange:function(a){t(a)},className:"jsx-".concat(i.a.__hash)+" form-add__input"})),s.a.createElement("label",{className:"jsx-".concat(i.a.__hash)+" form-add__label"},s.a.createElement("span",{className:"jsx-".concat(i.a.__hash)+" form-add__name"},"Genres"),s.a.createElement("select",{onChange:function(a){e(a,"genres")},className:"jsx-".concat(i.a.__hash)+" form-add__input"},s.a.createElement(m.Query,{query:_.f},function(a){var e=a.loading,t=(a.error,a.data);return e?s.a.createElement("option",{disabled:!0,className:"jsx-".concat(i.a.__hash)},"Loading genres..."):l(t.genres,E)})),s.a.createElement(u.a,{href:"/genres"})),n(E,o,"genres",i.a),s.a.createElement("label",{className:"jsx-".concat(i.a.__hash)+" form-add__label"},s.a.createElement("span",{className:"jsx-".concat(i.a.__hash)+" form-add__name"},"Influenced authors"),s.a.createElement("select",{onChange:function(a){e(a,"authors")},className:"jsx-".concat(i.a.__hash)+" form-add__input"},s.a.createElement(m.Query,{query:_.d},function(a){var e=a.loading,t=(a.error,a.data);return e?s.a.createElement("option",{disabled:!0,className:"jsx-".concat(i.a.__hash)},"Loading authors..."):l(t.authors,j)}))),n(j,o,"authors",i.a),s.a.createElement("div",{className:"jsx-".concat(i.a.__hash)+" form-add__btns"},s.a.createElement("button",{onClick:function(a){c(a)},className:"jsx-".concat(i.a.__hash)+" form-add__submit"},"edit-author"===d?"Save changes":"Create author"),s.a.createElement("button",{className:"jsx-".concat(i.a.__hash)+" form-add__close"},"Close"))),s.a.createElement(r.a,{styleId:i.a.__hash,css:i.a}))}))),j=t(17),x=function(a){var e=a.id;return s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)+" table__wrapper table__wrapper--edit"},s.a.createElement(m.Query,{query:_.d},function(a){var t=a.loading,c=a.error,n=a.data;if(a.client,t)return s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Loading authors...");if(c)return s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Error! $",c.message);var l=n.authors.find(function(a){return a.id===e});return s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)+" table"},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tr",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Author name"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Influenced authors"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Genres"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Books")),0===l.length?s.a.createElement(j.a,{name:"authors",size:"4"}):s.a.createElement("tr",{key:l.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},l.name),0===l.influencedAuthors.length?s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no influenced authors"):s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},l.influencedAuthors.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},a.name))})))),0===l.genres.length?s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no genres"):s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},l.genres.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},a.name))})))),0===l.books.length?s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no books available"):s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},l.books.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},a.name))})))))))}),s.a.createElement(r.a,{styleId:h.a.__hash,css:h.a}))},N=t(48),b=Object(m.graphql)(_.g,{name:"removeAuthorQuery",options:{refetchQueries:[{query:_.d}]}})(Object(N.a)(function(a){var e=a.deleteHandler;return s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)+" table__wrapper"},s.a.createElement("h2",{className:"jsx-".concat(h.a.__hash)+" table__name"},"Authors"),s.a.createElement(o.a,{trigger:s.a.createElement("button",{className:"jsx-".concat(h.a.__hash)+" table__add"},"Add author")},s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},s.a.createElement(E,{formType:"add-author",defaultState:{name:"",genreIds:new Set,influenceIds:new Set,biography:""}}))),s.a.createElement(m.Query,{query:_.d,fetchPolicy:"network-only"},function(a){var t=a.loading,c=a.error,n=a.data;if(t)return s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Loading authors...");if(c)return s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Error! $",c.message);var l=n.authors;return s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)+" table"},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tr",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Author name"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Influenced authors"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Genres"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Books"),s.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Actions")),0===l.length?s.a.createElement(j.a,{name:"authors",size:"5"}):l.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},a.name),0===a.influencedAuthors.length?s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no influenced authors"):s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},a.influencedAuthors.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},a.name))})))),0===a.genres.length?s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no genres"):s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},a.genres.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},a.name))})))),0===a.books.length?s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no books available"):s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},s.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},a.books.map(function(a){return s.a.createElement("tr",{key:a.id,className:"jsx-".concat(h.a.__hash)},s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},a.name))})))),s.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},s.a.createElement(o.a,{trigger:s.a.createElement("button",{className:"jsx-".concat(h.a.__hash)+" table__edit"},"Edit")},s.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},s.a.createElement(x,{id:a.id}),s.a.createElement(E,{formType:"edit-author",defaultState:{id:a.id,name:a.name,genreIds:new Set(a.genres.map(function(a){return a.id})),influenceIds:new Set(a.influencedAuthors.map(function(a){return a.id})),biography:a.biography}}))),s.a.createElement("button",{onClick:function(t,c){e(a.id,"removeAuthorQuery")},className:"jsx-".concat(h.a.__hash)+" table__delete"},s.a.createElement("span",{className:"jsx-".concat(h.a.__hash)},"Delete"))))})))}),s.a.createElement(r.a,{styleId:h.a.__hash,css:h.a}))})),f=t(32),p=t(33);e.default=Object(f.a)(function(){return s.a.createElement(p.a,{title:"Authors table"},s.a.createElement(n.a,{id:"3"}),s.a.createElement(b,null))})},47:function(a,e,t){"use strict";var c=t(6),s=t.n(c),n=t(0),l=t.n(n),r=t(25),m=t.n(r);e.a=function(a){var e=a.href;return l.a.createElement(m.a,{href:e},l.a.createElement("a",{className:"jsx-3715969836 link"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 456.795 456.795",className:"jsx-3715969836"},l.a.createElement("g",{className:"jsx-3715969836"},l.a.createElement("path",{d:"M448.947,218.475c-0.922-1.168-23.055-28.933-61-56.81c-50.705-37.253-105.877-56.944-159.551-56.944\r c-53.672,0-108.844,19.691-159.551,56.944c-37.944,27.876-60.077,55.642-61,56.81L0,228.397l7.846,9.923\r c0.923,1.168,23.056,28.934,61,56.811c50.707,37.252,105.879,56.943,159.551,56.943c53.673,0,108.845-19.691,159.55-56.943\r c37.945-27.877,60.078-55.643,61-56.811l7.848-9.923L448.947,218.475z M228.396,315.039c-47.774,0-86.642-38.867-86.642-86.642\r c0-7.485,0.954-14.751,2.747-21.684l-19.781-3.329c-1.938,8.025-2.966,16.401-2.966,25.013c0,30.86,13.182,58.696,34.204,78.187\r c-27.061-9.996-50.072-24.023-67.439-36.709c-21.516-15.715-37.641-31.609-46.834-41.478c9.197-9.872,25.32-25.764,46.834-41.478\r c17.367-12.686,40.379-26.713,67.439-36.71l13.27,14.958c15.498-14.512,36.312-23.412,59.168-23.412\r c47.774,0,86.641,38.867,86.641,86.642C315.037,276.172,276.17,315.039,228.396,315.039z M368.273,269.875\r c-17.369,12.686-40.379,26.713-67.439,36.709c21.021-19.49,34.203-47.326,34.203-78.188s-13.182-58.697-34.203-78.188\r c27.061,9.997,50.07,24.024,67.439,36.71c21.516,15.715,37.641,31.609,46.834,41.477\r C405.91,238.269,389.787,254.162,368.273,269.875z",className:"jsx-3715969836"}),l.a.createElement("path",{d:"M173.261,211.555c-1.626,5.329-2.507,10.982-2.507,16.843c0,31.834,25.807,57.642,57.642,57.642\r c31.834,0,57.641-25.807,57.641-57.642s-25.807-57.642-57.641-57.642c-15.506,0-29.571,6.134-39.932,16.094l28.432,32.048\r L173.261,211.555z",className:"jsx-3715969836"}))),l.a.createElement(s.a,{styleId:"3715969836",css:[".link.jsx-3715969836{margin-left:10px;}"]})))}}},[[251,1,0]]]);