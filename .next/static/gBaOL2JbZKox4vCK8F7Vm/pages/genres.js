(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{282:function(e,a,t){__NEXT_REGISTER_PAGE("/genres",function(){return e.exports=t(298),{page:e.exports.default}})},298:function(e,a,t){"use strict";t.r(a);var c=t(0),n=t.n(c),s=t(31),l=t(32),r=t(6),_=t.n(r),m=t(3),o=t(4),h=t(1),d=t(21),i=t(46),E=t(2),u=Object(m.compose)(m.withApollo,Object(m.graphql)(o.f,{name:"getGenresQuery"}),Object(m.graphql)(o.c,{name:"addGenreQuery",options:{refetchQueries:[{query:o.f}]}}),Object(m.graphql)(o.l,{name:"updateGenreQuery",options:{refetchQueries:[{query:o.f}]}}))(Object(i.a)(Object(m.withApollo)(function(e){var a=e.selectHandler,t=(e.clickHandler,e.changeHandler),c=e.submitHandler,s=e.mapFromCache,l=e.mapOptions,r=e.wrapProps,h=e.client,d=e.formType,i=Array.from(r.genreIds);return n.a.createElement("div",{className:"jsx-".concat(E.a.__hash)},n.a.createElement("section",{className:"jsx-".concat(E.a.__hash)+" form-add"},n.a.createElement("label",{className:"jsx-".concat(E.a.__hash)+" form-add__label"},n.a.createElement("span",{className:"jsx-".concat(E.a.__hash)+" form-add__name"},"Name"),n.a.createElement("input",{type:"text",name:"name",placeholder:"enter name",value:r.name,onChange:function(e){t(e)},className:"jsx-".concat(E.a.__hash)+" form-add__input"})),n.a.createElement("label",{className:"jsx-".concat(E.a.__hash)+" form-add__label"},n.a.createElement("span",{className:"jsx-".concat(E.a.__hash)+" form-add__name"},"Description"),n.a.createElement("textarea",{name:"description",placeholder:"enter description",value:r.description,onChange:function(e){t(e)},className:"jsx-".concat(E.a.__hash)+" form-add__input"})),n.a.createElement("label",{className:"jsx-".concat(E.a.__hash)+" form-add__label"},n.a.createElement("span",{className:"jsx-".concat(E.a.__hash)+" form-add__name"},"Related genres"),n.a.createElement("select",{onChange:function(e){a(e,"genres")},className:"jsx-".concat(E.a.__hash)+" form-add__input"},n.a.createElement(m.Query,{query:o.f},function(e){var a=e.loading,t=(e.error,e.data);return a?n.a.createElement("option",{disabled:!0,className:"jsx-".concat(E.a.__hash)},"Loading genres..."):l(t.genres,i)}))),s(i,h,"genres",E.a),n.a.createElement("div",{className:"jsx-".concat(E.a.__hash)+" form-add__btns"},n.a.createElement("button",{onClick:function(e){c(e)},className:"jsx-".concat(E.a.__hash)+" form-add__submit"},"edit-genre"===d?"Save changes":"Create genre"),n.a.createElement("button",{className:"jsx-".concat(E.a.__hash)+" form-add__close"},"Close"))),n.a.createElement(_.a,{styleId:E.a.__hash,css:E.a}))}))),j=t(17),x=function(e){var a=e.id;return n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)+" table__wrapper table__wrapper--edit"},n.a.createElement(m.Query,{query:o.f},function(e){var t=e.loading,c=e.error,s=e.data;if(e.client,t)return n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Loading genres...");if(c)return n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Error! $",c.message);var l=s.genres.find(function(e){return e.id===a});return n.a.createElement("table",{className:"jsx-".concat(h.a.__hash)+" table"},n.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},n.a.createElement("tr",{className:"jsx-".concat(h.a.__hash)},n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Genre name"),n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Related genres"),n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Description")),0===l.length?n.a.createElement(j.a,{name:"genres",size:"3"}):n.a.createElement("tr",{key:l.id,className:"jsx-".concat(h.a.__hash)},n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},l.name),0===l.relatedGenres.length?n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no related genres"):n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},n.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},n.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},l.relatedGenres.map(function(e){return n.a.createElement("tr",{key:e.id,className:"jsx-".concat(h.a.__hash)},n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},e.name))})))),n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},l.description))))}),n.a.createElement(_.a,{styleId:h.a.__hash,css:h.a}))},N=t(48),b=Object(m.graphql)(o.i,{name:"removeGenreQuery",options:{refetchQueries:[{query:o.f}]}})(Object(N.a)(function(e){var a=e.deleteHandler;return n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)+" table__wrapper"},n.a.createElement("h2",{className:"jsx-".concat(h.a.__hash)+" table__name"},"Genres"),n.a.createElement(d.a,{trigger:n.a.createElement("button",{className:"jsx-".concat(h.a.__hash)+" table__add"},"Add genre")},n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},n.a.createElement(u,{formType:"add-genre",defaultState:{name:"",genreIds:new Set,description:""}}))),n.a.createElement(m.Query,{query:o.f,fetchPolicy:"network-only"},function(e){var t=e.loading,c=e.error,s=e.data;if(e.client,t)return n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Loading genres...");if(c)return n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},"Error! $",c.message);var l=s.genres;return n.a.createElement("table",{className:"jsx-".concat(h.a.__hash)+" table"},n.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},n.a.createElement("tr",{className:"jsx-".concat(h.a.__hash)},n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Genre name"),n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Related genres"),n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Description"),n.a.createElement("th",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"Actions")),0===l.length?n.a.createElement(j.a,{name:"genres",size:"4"}):l.map(function(e){return n.a.createElement("tr",{key:e.id,className:"jsx-".concat(h.a.__hash)},n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},e.name),0===e.relatedGenres.length?n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},"no related genres"):n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},n.a.createElement("table",{className:"jsx-".concat(h.a.__hash)},n.a.createElement("tbody",{className:"jsx-".concat(h.a.__hash)},e.relatedGenres.map(function(e){return n.a.createElement("tr",{key:e.id,className:"jsx-".concat(h.a.__hash)},n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)},e.name))})))),n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},e.description),n.a.createElement("td",{className:"jsx-".concat(h.a.__hash)+" table__cell"},n.a.createElement(d.a,{trigger:n.a.createElement("button",{className:"jsx-".concat(h.a.__hash)+" table__edit"},"Edit")},n.a.createElement("div",{className:"jsx-".concat(h.a.__hash)},n.a.createElement(x,{id:e.id}),n.a.createElement(u,{formType:"edit-genre",defaultState:{id:e.id,name:e.name,genreIds:new Set(e.relatedGenres.map(function(e){return e.id})),description:e.description}}))),n.a.createElement("button",{onClick:function(t,c){a(e.id,"removeGenreQuery")},className:"jsx-".concat(h.a.__hash)+" table__delete"},n.a.createElement("span",{className:"jsx-".concat(h.a.__hash)},"Delete"))))})))}),n.a.createElement(_.a,{styleId:h.a.__hash,css:h.a}))})),p=t(33);a.default=Object(l.a)(function(){return n.a.createElement(p.a,{title:"Genres table"},n.a.createElement(s.a,{id:"4"}),n.a.createElement(b,null))})}},[[282,1,0]]]);